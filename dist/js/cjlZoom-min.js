(function(e){var t=1;e.fn.cjlZoom=function(n){function f(e){if(e.originalEvent.wheelDelta>0){s.width=s.width*1.2<=i.outerWidth()*r.maxZoom?s.width*1.2:s.width;s.height=s.height*1.2<=i.outerHeight()*r.maxZoom?s.height*1.2:s.height}else{s.width=s.width*.8>=i.outerWidth()*r.minZoom?s.width*.8:s.width;s.height=s.height*.8>=i.outerHeight()*r.minZoom?s.height*.8:s.height}c(e)}function l(t){if(t.pageX>=o.left&&t.pageX<=i.offset().left+i.outerWidth()&&t.pageY>=i.offset().top&&t.pageY<=i.offset().top+i.outerHeight()){if(p[r.style]["onmousemove"])p[r.style]["onmousemove"](t)}else{r.onClose();a.fadeOut();e("body").off("mousemove",l).off("mousewheel",h);if(p[r.style]["onclose"])p[r.style]["onclose"]()}}function c(e){var t=(e.pageX-o.left)/i.outerWidth(),n=(e.pageY-o.top)/i.outerHeight(),u=-(t*s.width-r.width/2),f=-(n*s.height-r.height/2);if(r.limitPositioning){if(u>0)u=0;else if(u<-(s.width-a.outerWidth()))u=-(s.width-a.outerWidth());if(f>0)f=0;else if(f<-(s.height-a.outerHeight()))f=-(s.height-a.outerHeight())}a.css({"background-position":u+"px "+f+"px","background-size":s.width+"px "+s.height+"px"})}function h(e){e.preventDefault()}var r={width:200,height:200,limitPositioning:false,distance:10,initZoom:2,minZoom:1.5,maxZoom:10,style:"lens",onShow:function(){},onClose:function(){}};var i,s,o;for(var u in n)r[u]=n[u];var a=e('<div class="cjl-zoom"></div>').addClass("cjl-zoom-"+t+" cjl-zoom-"+r.style);e("body").append(a);t++;this.mouseenter(function(t){s=new Image;s.src=e(this).attr("data-img-large")?e(this).attr("data-img-large"):e(this).attr("src");e("body").css("cursor","wait");var n=setInterval(function(){if(s.complete){clearInterval(n);e("body").css("cursor","")}},10);i=e(this);o=i.offset();s.width=i.outerWidth()*r.initZoom;s.height=i.outerHeight()*r.initZoom;if(p[r.style]["init"])p[r.style]["init"](t);e("body").on("mousemove",l).on("mousewheel",h);r.onShow();a.css({"background-image":"url("+s.src+")",width:r.width,height:r.height}).fadeIn()});a.on("mousewheel",f);var p={lens:{onmousemove:function(e){a.css({top:e.pageY-r.height/2,left:e.pageX-r.width/2});c(e)}},overlay:{init:function(e){r.limitPositioning=true;r.width=i.outerWidth();r.height=i.outerHeight();a.css({top:o.top,left:o.left,width:r.width,height:r.height})},onmousemove:c,onmousemove2:function(e){var t=(e.pageX-o.left)/(i.outerWidth()*2),n=(e.pageY-o.top)/i.outerHeight(),r=t*s.width,u=n*s.height;console.log(t);a.css({"background-position":-r+"px "+ -u+"px","background-size":s.width+"px "+s.height+"px"})}},outside:{init:function(t){r.limitPositioning=true;var n,s;if(o.left>=a.outerWidth()+r.distance){s=o.left-(a.outerWidth()+r.distance);n=o.top;this.containerPosition="left"}else if(e("body").outerWidth()-(o.left+i.outerWidth())>=a.outerWidth()+r.distance){s=o.left+i.outerWidth()+r.distance;n=o.top;this.containerPosition="right"}else if(o.top>=a.outerHeight()+r.distance){s=o.left;n=o.top-(a.outerHeight()+r.distance);this.containerPosition="top"}else{s=o.left;n=o.top+i.outerHeight()+r.distance;this.containerPosition="bottom"}a.css({top:n,left:s}).addClass("cjl-zoom-"+this.containerPosition);i.on("mousewheel",f)},onmousemove:c,onclose:function(){i.off("mousewheel",f);a.removeClass("cjl-zoom-"+this.containerPosition)}}};return this}})(jQuery,window)